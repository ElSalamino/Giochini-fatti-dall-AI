:root { --bg:#0b0f17; --card:#121a26; --muted:#9fb0c3; --text:#e8eef6; --line:#223047; }
* { box-sizing:border-box; }
body { margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial; background:var(--bg); color:var(--text); }
.topbar { display:flex; gap:16px; align-items:center; padding:14px 16px; border-bottom:1px solid var(--line); position:sticky; top:0; background:rgba(11,15,23,.92); backdrop-filter: blur(6px); }
.title { font-weight:700; letter-spacing:.3px; }
.stats { display:flex; gap:14px; flex-wrap:wrap; }
.k { color:var(--muted); margin-right:6px; }
.actions { margin-left:auto; display:flex; gap:8px; flex-wrap:wrap; }

button { background:#1b2638; color:var(--text); border:1px solid var(--line); padding:8px 10px; border-radius:10px; cursor:pointer; }
button:hover { filter:brightness(1.08); }
button.primary { background:#23406b; border-color:#2f5694; }
button.danger { background:#3a1b1b; border-color:#7a2f2f; }

.grid { display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap:14px; padding:14px; }
.card { background:var(--card); border:1px solid var(--line); border-radius:16px; padding:12px; }
.card.wide { grid-column: 1 / -1; }

h2 { margin:0 0 10px 0; font-size:16px; }
.row { display:flex; align-items:center; justify-content:space-between; gap:10px; margin:8px 0; }
label { color:var(--muted); }
input, select { width:180px; padding:8px 10px; border-radius:10px; border:1px solid var(--line); background:#0e1520; color:var(--text); }
.row.buttons { justify-content:flex-start; }
.msg { margin-top:10px; color:var(--muted); min-height:18px; }
.hint { margin-top:10px; color:var(--muted); font-size:12px; }

.prices { display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap:8px; }
.priceItem { border:1px solid var(--line); border-radius:12px; padding:10px; background:#0e1520; }
.priceTop { display:flex; justify-content:space-between; gap:8px; }
.badge { font-size:12px; padding:2px 8px; border-radius:999px; border:1px solid var(--line); color:var(--muted); }
.badge.up { color:#9ff0b3; border-color:#2f6b44; }
.badge.down { color:#ff9aa3; border-color:#7a2f3b; }

.log { max-height:240px; overflow:auto; border:1px solid var(--line); border-radius:12px; background:#0e1520; padding:10px; }
.logLine { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:12px; color:var(--muted); padding:2px 0; }

.small { color:var(--muted); font-size:12px; }
hr { border:0; border-top:1px solid var(--line); margin:10px 0; }

@media (max-width: 900px) {
  .grid { grid-template-columns: 1fr; }
}
.newsList { display:flex; flex-direction:column; gap:8px; }
.newsItem {
  display:flex; align-items:flex-start; justify-content:space-between; gap:12px;
  padding:10px; border:1px solid var(--line); border-radius:12px; background:#0e1520;
}
.newsLeft { display:flex; flex-direction:column; gap:4px; }
.newsDate { color:var(--muted); font-size:12px; white-space:nowrap; }

.newsText { line-height:1.25; }
.newsStrong .newsText { font-weight:700; }
.newsThin .newsText { font-weight:400; color:var(--muted); }
.lot { padding:4px 0; }

.lot.up {
  color: #9ff0b3;        /* verde */
}
.lot.down { color:#ff6b6b; }
.lot.flat {
  color: var(--text);   /* neutro */
}
@keyframes flashUp {
  0% { box-shadow: 0 0 0 rgba(0,0,0,0); border-color: var(--line); }
  20% { box-shadow: 0 0 0 3px rgba(159,240,179,.25); border-color: #2f6b44; }
  100% { box-shadow: 0 0 0 rgba(0,0,0,0); border-color: var(--line); }
}
@keyframes flashDown {
  0% { box-shadow: 0 0 0 rgba(0,0,0,0); border-color: var(--line); }
  20% { box-shadow: 0 0 0 3px rgba(255,154,163,.22); border-color: #7a2f3b; }
  100% { box-shadow: 0 0 0 rgba(0,0,0,0); border-color: var(--line); }
}

.flash-up { animation: flashUp 650ms ease-out; }
.flash-down { animation: flashDown 650ms ease-out; }
.modal.hidden { display:none; }
.modal {
  position:fixed; inset:0; background:rgba(0,0,0,.55);
  display:flex; align-items:center; justify-content:center; padding:16px;
}
.modalCard {
  width:min(920px, 96vw);
  background:var(--card);
  border:1px solid var(--line);
  border-radius:16px;
  padding:12px;
}
.modalHeader { display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
#chartCanvas { width:100%; height:auto; border:1px solid var(--line); border-radius:12px; background:#0e1520; }

.track { display:flex; flex-direction:column; gap:10px; padding:10px; border:1px solid var(--line); border-radius:14px; background:#0e1520; }
.lane { position:relative; height:34px; border:1px solid #1d2a40; border-radius:12px; overflow:hidden; }
.finish { position:absolute; right:12px; top:0; bottom:0; width:2px; background:#9fb0c3; opacity:.6; }
.horse {
  position:absolute; left:8px; top:50%;
  transform: translate(0px, -50%);
  width:28px; height:28px; border-radius:8px;
  display:flex; align-items:center; justify-content:center;
  border:1px solid var(--line);
  background:#121a26;
  transition: transform 60ms linear;
  will-change: transform;
}

/* Colori cavalli */
.horse.h1 { background:#1f6feb; border-color:#1f6feb; }
.horse.h2 { background:#2ea043; border-color:#2ea043; }
.horse.h3 { background:#d29922; border-color:#d29922; }
.horse.h4 { background:#a371f7; border-color:#a371f7; }
.horse.h5 { background:#f85149; border-color:#f85149; }
.horse.running { transition: transform 60ms linear; }

.ortoWrap { display:flex; gap:14px; align-items:flex-start; flex-wrap:wrap; }
.ortoGrid {
  display:grid;
  grid-template-columns: repeat(5, 52px);
  grid-template-rows: repeat(5, 52px);
  gap:8px;
  padding:10px;
  border:1px solid var(--line);
  border-radius:14px;
  background:#0e1520;
}
.ortoCell {
  width:52px; height:52px;
  border:1px solid var(--line);
  border-radius:12px;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
  user-select:none;
  position:relative;
}
.ortoCell.empty { opacity:.9; }
.ortoCell.selectedOutline { outline:2px solid #2f5694; outline-offset:2px; }
.ortoCell.mature { box-shadow: 0 0 0 2px rgba(159,240,179,.18) inset; }
.ortoCell.stale { opacity:.65; }

.ortoSide { min-width: 240px; }
